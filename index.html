<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0f" />
  <title>ë‚‘ê°± ê°€ê³„ë¶€</title>
  <style>
    :root{
    /* Cloud Dancer base (soft white) */
    --bg: #f7f7f8;
    --panel: #ffffff;
    --panel2: #f1f1f4;
    --shadow: rgba(0,0,0,.10);
    --text: #111111;
    --muted: #666666;
    --line: rgba(0,0,0,.08);
    --expense-red: #C85C5C;   /* ğŸŒ¹ ì§€ì¶œ (Muted Rose Red) 
    --income-green: #20c997;  /* ì´ë¯¸ ì“°ê³  ìˆëŠ” ok ì»¬ëŸ¬ */

    /* accents */
    --accent:#4da3ff;
    --danger:#ff5b5b;
    --ok:#20c997;

    --radius:16px;

    /* NEW: surfaces used by header/tabbar/modal */
    --surface: rgba(255,255,255,.78);
    --surface-strong: rgba(255,255,255,.92);
    --shadow: rgba(0,0,0,.12);
    --overlay: rgba(0,0,0,.35);
    }

    
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      padding-bottom:78px; /* bottom tab ê³µê°„ */
    }

    /* ìƒë‹¨ í—¤ë” */
  .header{
    position:sticky; top:0;
    background: linear-gradient(to bottom, rgba(255,255,255,.92), rgba(255,255,255,.72));
    backdrop-filter: blur(10px);
    border-bottom:1px solid var(--line);
    padding:18px 16px 12px;
    z-index:5;
  }
    .title{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .title h1{
      margin:0;
      font-size:24px;
      letter-spacing:-.3px;
    }
    .subtitle{
      margin-top:6px;
      color:var(--muted);
      font-size:13px;
    }

    /* ë©”ì¸ ì˜ì—­ */
    .container{
      padding:16px;
      max-width:720px;
      margin:0 auto;
    }

    /* ì¹´ë“œ */
    .card{
      background: var(--panel); 
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 14px;
      margin-bottom: 12px;
      box-shadow: 0 10px 26px var(--shadow);
    }
    .card h2{
      margin:0 0 10px 0;
      font-size:16px;
      letter-spacing:-.2px;
    }
    .hint{
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
      margin:0;
    }

    /* íƒ­ í˜ì´ì§€ */
    .page{ display:none; }
    .page.active{ display:block; }

    /* í•˜ë‹¨ íƒ­ë°” */
    .tabbar{
     position:fixed; left:0; right:0; bottom:0;
     height:66px;
     background: rgba(255,255,255,.82);
     backdrop-filter: blur(14px);
     border-top:1px solid var(--line);
     display:flex;
     padding:8px 10px 10px;
     z-index:10;
    }
    
    .tab{
      flex:1;
      border:none;
      background:transparent;
      color:var(--muted);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:4px;
      border-radius:14px;
      font-size:11px;
      cursor:pointer;
    }
    .tab .icon{font-size:18px; line-height:1}
    .tab.active{
      color:var(--text);
    }
    .tab.active .icon{
      filter: drop-shadow(0 0 10px rgba(77,163,255,.25));
    }

    
    /* âœ… FAB: ì›ë˜ ëª¨ì–‘ ìœ ì§€ + Sage ì»¬ëŸ¬ë§Œ ì ìš© (ìµœì¢…) */
    .fab{
      position:fixed;
      right:18px;
      bottom:86px;
      width:54px;
      height:54px;
      border-radius:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:12;
      cursor:pointer;
      line-height:1;

      /* âœ… ì—¬ê¸°ë¶€í„° Sage í†¤ */
      background: linear-gradient(180deg, #8FBFB0, #7FAE9E);
      color: #F7F8FA; /* Cloud Dancer White */
      text-shadow: 0 1px 0 rgba(46,50,58,.12);
      border: 1px solid rgba(127,174,158,.28); /* ì•„ì£¼ ì–‡ê²Œë§Œ */
      box-shadow:
        0 12px 26px rgba(127,174,158,.35),
        inset 0 1px 0 rgba(255,255,255,.75);
      }

/* + ê¸°í˜¸ê°€ ì‚´ì§ ë‚´ë ¤ê°€ ë³´ì´ë©´ ì´ê±°(ì„ íƒ) */
.fab{ padding-bottom:2px; }



/* ===== FAB ìµœì¢… ê°•ì œ(íŒŒë‘/ìœ ê²©/ì‘ì€ + ì „ë¶€ í•´ê²°) ===== */
.fab{
  /* ëª¨ì–‘/ìœ„ì¹˜ ê³ ì • */
  position:fixed !important;
  right:18px !important;
  bottom:86px !important;
  width:54px !important;
  height:54px !important;
  border-radius:18px !important;

  /* ì •ë ¬ */
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;

  /* + í¬ê¸°/ìœ„ì¹˜ */
  font-size:30px !important;
  line-height:1 !important;
  padding-bottom:2px !important;

  /* âœ… Sage ë°°ê²½ ê°•ì œ */
  background: linear-gradient(180deg, #8FBFB0, #7FAE9E) !important;
  color: #F7F8FA !important;         /* Cloud Dancer White */
  text-shadow: 0 1px 0 rgba(46,50,58,.12) !important;
  
  /* âœ… ìœ ê²©(í…Œë‘ë¦¬) ì œê±° */
  border:none !important;

  /* ê·¸ë¦¼ì */
  box-shadow:
    0 12px 26px rgba(127,174,158,.35),
    inset 0 1px 0 rgba(255,255,255,.75) !important;

  z-index:12 !important;
}
    
    
    /* ì‘ì€ ë°°ì§€ */
    .pill{
      display:inline-flex;
      gap:6px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:var(--panel2);
      color:var(--muted);
      font-size:12px;
    }

    .modal{
      position:fixed; inset:0;
      background: var(--overlay);
      display:flex; align-items:flex-end;
      z-index:20;
    }
    .modal.hidden{display:none}
    .sheet{
      width:100%;
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:20px 20px 0 0;
      padding:16px;
    }
    .sheet h3{margin:0 0 12px}
    .row{display:flex; flex-direction:column; gap:6px; margin-bottom:10px}
    input,select{
      background:var(--panel2);
      border:1px solid var(--line);
      color:var(--text);
      padding:10px;
      border-radius:10px;
    }
    .actions{
      display: flex;
      gap: 12px;        /* ì§€ì¶œ/ìˆ˜ì… gapì´ 10ì´ë©´ 10~12 */
      margin-top: 12px;
    }
    .actions button{
      flex: 1;
      height: 44px;           /* âœ… ì§€ì¶œ/ìˆ˜ì…ê³¼ ë™ì¼ */
      border-radius: 14px;    /* âœ… ì§€ì¶œ/ìˆ˜ì…ê³¼ ë™ì¼ */
      border: none;
      font-size: 14px;
      font-weight: 500;
      letter-spacing: -0.2px;
      cursor: pointer;
      padding: 12px;
      margin-top: 22px;
    }

    /* ì—­í• ë³„ ì°¨ì´ë§Œ */
    #save{ opacity: .9; }
    #close{ opacity: .75; }
    }
   
    .actions .ghost{background:transparent; color:var(--muted)} 

/* Cloud Dancer â€“ Sage ì§€ì¶œ/ìˆ˜ì… í† ê¸€ */
.segmented{
  display:flex;
  gap:12px;
  margin: 8px 0 14px;
}

.seg-btn{
  flex:1;
  height:44px;
  border-radius:14px;
  border:1px solid #D9DDE5;      /* Mist Line Gray */
  background:#EFF1F5;            /* Soft Fog Gray */
  color:#2E323A;                 /* Cloud Ink */
  font-size:14px;
  font-weight:700;
  letter-spacing:-0.2px;
  cursor:pointer;
  -webkit-appearance:none;
  appearance:none;
}

.seg-btn.active{
  background:
    linear-gradient(
      180deg,
      #F7F8FA,
      #EFF1F5
    );                            /* Cloud Dancer White â†’ Soft Fog */
  color:#2E323A;                 /* Cloud Ink */
  border-color:#7FAE9E;          /* ğŸŒ¿ Cloud Sage */
  box-shadow:
    0 6px 14px rgba(127,174,158,.28),
    inset 0 1px 0 rgba(255,255,255,.9);
}

    #memo{
      background: var(--panel2);
      border: 1px solid var(--line);
      border-radius: 14px;

      font-size: 16px;
      min-height: 56px;      /* ë©”ëª¨ 2ì¤„, ì¤„ë°”ê¿ˆ ìì—°, ë¦¬ì‚¬ì´ì¦ˆ ê¸ˆì§€ */
      resize: none;
      line-height: 1.4;
      padding: 10px;
    }
    
    .type-btn {
      font-size: 13px;   /* â† ì—¬ê¸°ì„œ ì¡°ì ˆ (13~15 ì¶”ì²œ) */
      padding: 8px 14px;
    }
    
    /* iOSì—ì„œ input í´ë¦­ ì‹œ ìë™ í™•ëŒ€(zoom) ë°©ì§€ í•µì‹¬ */
    input, select, textarea {
      font-size: 16px !important;
    }

    /* í˜¹ì‹œ ëª¨ë‹¬ ì•ˆì˜ inputë§Œ ë”°ë¡œ ì‘ê²Œ ë¨¹ëŠ” ê²½ìš° ëŒ€ë¹„ */
    .modal input, .modal select, .modal textarea {
     font-size: 16px !important;
    }

    /* ëª¨ë‹¬ textareaë§Œ ì˜ˆì˜ê²Œ */
    textarea{
      width:100%;
      background: var(--panel2);         /* âœ… íšŒìƒ‰ í†µì¼ */
      border: 1px solid var(--line);     /* âœ… ë™ì¼í•œ ë¼ì¸ */
      color: var(--text);
      padding: 10px;                     /* âœ… inputê³¼ ë™ì¼ */
      border-radius: 14px;               /* âœ… ë‘¥ê¸€ê²Œ(ë„ˆê°€ ì›í•œ 14px) */
      font-family: inherit;              /* âœ… í°íŠ¸ í†µì¼(ìê°„ ì´ìŠˆ ë°©ì§€) */
      letter-spacing: -0.2px;            /* âœ… ìê°„ í†µì¼ */
      line-height: 1.4;
      resize: none;                      /* âœ… ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ ì œê±° */
    }


    /* iOS Safari date input text-align fix */
input[type="date"]{
  text-align: left;
  padding-left: 10px; /* ì™¼ìª½ìœ¼ë¡œ â€˜ë¶™ì–´ ë³´ì´ê²Œâ€™ */
}

input[type="date"]::-webkit-date-and-time-value{
  text-align: left;
}
    .hidden { display: none !important; }


    #recentList{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:10px;
    }
    .recent-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:12px;
      border:1px solid var(--line);
      border-radius:14px;
      background:var(--panel2);
    }
    .recent-left{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .recent-meta{
      font-size:12px;
      color:var(--muted);
    }
    .recent-amt{
      font-weight:800;
    }

    /* ì§€ì¶œ */
    .recent-amt.expense{
      color: var(--expense-red);
    }

    /* ìˆ˜ì… */
    .recent-amt.income{
      color: var(--income-green);
    }

    

@supports (background: color-mix(in srgb, white, black)) {
  .fab{
    background: linear-gradient(
      180deg,
      color-mix(in srgb, var(--accent) 78%, white),
      var(--accent)
    );
  }
}
    
  </style>
</head>

<body>
  <header class="header">
    <div class="title">
      <h1>ë‚‘ê°± ê°€ê³„ë¶€</h1>
      <span class="pill">ë¡œì»¬ì €ì¥(ë‚´ í°ì—ë§Œ)</span>
    </div>
    <div class="subtitle">í•˜ë‹¨ íƒ­ìœ¼ë¡œ ì´ë™ Â· í™ˆì—ì„œ +ë¡œ ì…ë ¥(ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ë¶™ì„)</div>
  </header>

  <main class="container">
    <!-- HOME -->
    <section class="page active" id="page-home">
      <div class="card">
        <h2>í™ˆ</h2>
        <p class="hint">
          ì—¬ê¸°ì—” â€œì§€ì¶œ/ìˆ˜ì… ì¶”ê°€â€ + â€œë¦¬ìŠ¤íŠ¸â€ê°€ ë“¤ì–´ê°ˆ ìë¦¬ì•¼.<br/>
          ë‹¤ìŒ ë‹¨ê³„ì—ì„œ + ë²„íŠ¼ ëˆ„ë¥´ë©´ ì…ë ¥ì°½ ëœ¨ê²Œ ë§Œë“¤ ê±°ì„.
        </p>
      </div>

      <div class="card">
        <h2>ìµœê·¼ ë‚´ì—­</h2>
        <div id="recentList"></div>
      </div>
    </section>

    <!-- STATS -->
    <section class="page" id="page-stats">
      <div class="card">
        <h2>í†µê³„</h2>
        <p class="hint">
          ì›í˜• ê·¸ë˜í”„(ì¹´í…Œê³ ë¦¬ ë¹„ìœ¨) + ì „ì›” ëŒ€ë¹„ ë§‰ëŒ€ê·¸ë˜í”„ ìë¦¬.<br/>
          (ì°¨íŠ¸ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ë¶™ì¼ê²Œ)
        </p>
      </div>
    </section>

    <!-- BUDGET -->
    <section class="page" id="page-budget">
      <div class="card">
        <h2>ì˜ˆì‚°</h2>
        <p class="hint">
          ì´ ìƒí™œë¹„ / ì‹ë¹„ / ìƒí•„í’ˆ / ì·¨ë¯¸ ì˜ˆì‚°ì„ ì„¤ì •í•˜ê³ <br/>
          ëª©í‘œ ëŒ€ë¹„ ì‚¬ìš© í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
        </p>
      </div>
      
      <div class="card">
        <h2>ì´ë²ˆ ë‹¬ ì˜ˆì‚°</h2>
        <div class="row">
          <label>ì‹ë¹„</label>
          <input type="text" placeholder="ì˜ˆ: 600,000ì›" disabled />
        </div>

        <div class="row">
          <label>ìƒí™œë¹„</label>
          <input type="text" placeholder="ì˜ˆ: 400,000ì›" disabled />
        </div>

        <div class="row">
          <label>ì·¨ë¯¸ / ì—¬ê°€</label>
          <input type="text" placeholder="ì˜ˆ: 200,000ì›" disabled />
        </div>

        <p class="hint">
        â€» ì˜¤ëŠ˜ì€ UIë§Œ. ì…ë ¥/ê³„ì‚°ì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì—°ê²°í• ê²Œìš”.
        </p>
      </div>
    </section>

    <!-- MONTHLY -->
    <section class="page" id="page-monthly">
      <div class="card">
        <h2>ì›”ë³„</h2>
        <p class="hint">
          ì›” ì„ íƒ â†’ í•´ë‹¹ ì›” ì§€ì¶œ/ìˆ˜ì… ë¦¬ìŠ¤íŠ¸ + í•©ê³„ ìë¦¬.
        </p>
      </div>
    </section>
  </main>

  <!-- Floating + button (Home only) -->
  <button class="fab" id="fab" type="button"><span>+</span></button>
  <div class="modal hidden" id="modal">
  <div class="sheet">
    <h3>ì§€ì¶œ / ìˆ˜ì… ì¶”ê°€</h3>

    <div class="row">
      <label class="label">êµ¬ë¶„</label>

        <div class="segmented" id="typeSegment" role="group" aria-label="ì§€ì¶œ ìˆ˜ì… ì„ íƒ">
          <button type="button" class="seg-btn active" data-value="expense">ì§€ì¶œ</button>
          <button type="button" class="seg-btn" data-value="income">ìˆ˜ì…</button>
        </div>

      <!-- ì‹¤ì œ ì €ì¥ê°’ì„ ë‹´ëŠ” ìˆ¨ê²¨ì§„ input -->
      <input type="hidden" id="type" value="expense" />
    </div>

    <div class="row">
      <label>ë‚ ì§œ</label>
      <input type="date" id="spentDate" />
    </div>

    <div class="row">
  <label>ê¸ˆì•¡</label>
  <input type="text" id="amount" placeholder="ê¸ˆì•¡ ì…ë ¥" inputmode="numeric" autocomplete="off" />
</div>

    <div class="row">
      <label>ì¹´í…Œê³ ë¦¬</label>
      <select id="category"></select>
    </div>

    <div class="row">
      <label>ì‚¬ìš©ì²˜</label>
      <input id="place" placeholder="ì´ë§ˆíŠ¸ / ì¿ íŒ¡ / ì»¬ë¦¬ / ë„¤ì´ë²„ / í¸ì˜ì  / ë§ˆíŠ¸ / ê¸°íƒ€" />
    </div>

    <div class="row">
      <label>ë©”ëª¨(ë¹„ê³ )</label>
      <textarea id="memo" placeholder="ì´ìœ  / ëª©ì  / ëŠë‚Œ ì ì–´ë‘ê¸°"></textarea>
    </div>
    
    <div class="row">
      <label>ì¹´ë“œ</label>
      <select id="card">
        <option>ì‚¼ì„±</option>
        <option>ì‹ í•œ</option>
        <option>êµ­ë¯¼</option>
        <option>í˜„ê¸ˆ/ê³„ì¢Œ</option>
      </select>
    </div>

    <div class="actions">
      <button class="action-btn" id="save">ì €ì¥</button>
      <button class="action-btn" id="close">ë‹«ê¸°</button>
    </div>
  </div>
</div>
  <!-- Bottom tabs -->
  <nav class="tabbar" role="tablist" aria-label="í•˜ë‹¨ íƒ­">
    <button class="tab active" data-target="home" role="tab" aria-selected="true">
      <div class="icon">ğŸ </div>
      <div>í™ˆ</div>
    </button>
    <button class="tab" data-target="stats" role="tab" aria-selected="false">
      <div class="icon">ğŸ“Š</div>
      <div>í†µê³„</div>
    </button>
    <button class="tab" data-target="budget" role="tab" aria-selected="false">
      <div class="icon">ğŸ¯</div>
      <div>ì˜ˆì‚°</div>
    </button>
    <button class="tab" data-target="monthly" role="tab" aria-selected="false">
      <div class="icon">ğŸ—“ï¸</div>
      <div>ì›”ë³„</div>
    </button>
  </nav>

  <script>
    // íƒ­ ì „í™˜
    const tabs = document.querySelectorAll('.tab');
    const pages = {
      home: document.getElementById('page-home'),
      stats: document.getElementById('page-stats'),
      budget: document.getElementById('page-budget'), // âœ… ì¶”ê°€
      monthly: document.getElementById('page-monthly'),
    };
    const fab = document.getElementById('fab');

    function setActiveTab(target){
      // pages
      Object.entries(pages).forEach(([key, el])=>{
        el.classList.toggle('active', key === target);
      });

      // tabs
      tabs.forEach(t=>{
        const isActive = t.dataset.target === target;
        t.classList.toggle('active', isActive);
        t.setAttribute('aria-selected', isActive ? 'true' : 'false');
      });

      // + ë²„íŠ¼ì€ í™ˆì—ì„œë§Œ ë³´ì´ê¸°
      fab.classList.toggle('hidden', target !== 'home');
    }

    tabs.forEach(t=>{
      t.addEventListener('click', ()=> setActiveTab(t.dataset.target));
    });

// ===== ì¹´í…Œê³ ë¦¬(ì´ˆê¸°ê°’: ë‚˜ì¤‘ì— ì–¸ì œë“  ì¶”ê°€ ê°€ëŠ¥) =====
const CATEGORIES = [
  "ì‹ë¹„",
  "ì™¸ì‹/ë°°ë‹¬",
  "ì»¤í”¼/ê°„ì‹",
  "ìƒí•„í’ˆ",
  "ì˜ë¥˜/ì¡í™”",
  "ì•„ì´ìš©í’ˆ",
  "ì•„ì´ì˜ë¥˜",
  "êµìœ¡/ì²´í—˜",
  "ë³´í—˜ë£Œ",
  "ê³µê³¼ê¸ˆ",
  "ê±´ê°•ë³´í—˜ë£Œ",
  "ìƒí’ˆë§¤ì…ë¹„",
  "ì¬ë£ŒÂ·ì œì‘ë¹„",
  "ë°°ì†¡/íƒë°°ë¹„",
  "ìŠ¤í† ì–´ë¹„ìš©",
  "ê¸°íƒ€"
];

const modal = document.getElementById('modal');
const closeBtn = document.getElementById('close');
const saveBtn = document.getElementById('save');

const typeEl = document.getElementById('type');
const amountEl = document.getElementById('amount');
const categoryEl = document.getElementById('category');
const placeEl = document.getElementById('place');
const cardEl = document.getElementById('card');
const spentDateEl = document.getElementById('spentDate');
const memoEl = document.getElementById('memo'); // âœ… ì¶”ê°€!
    
function renderCategories(){
  categoryEl.innerHTML = "";
  CATEGORIES.forEach(name=>{
    const opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    categoryEl.appendChild(opt);
  });
}
renderCategories();

// + ë²„íŠ¼ â†’ ëª¨ë‹¬ ì—´ê¸°
fab.addEventListener('click', ()=>{
  modal.classList.remove('hidden');

  // âœ… ë‚ ì§œ ê¸°ë³¸ê°’ = ì˜¤ëŠ˜
  if (spentDateEl) {
    spentDateEl.value = new Date().toISOString().slice(0,10);
  }

  amountEl.focus();
});
    
// ë‹«ê¸°
closeBtn.addEventListener('click', ()=>{
  modal.classList.add('hidden');
});

// ì €ì¥(ì¼ë‹¨ ë¡œì»¬ ì €ì¥ë§Œ)
saveBtn.addEventListener('click', ()=>{
  const amount = Number(amountEl.dataset.raw || 0);
  if(!amount || amount <= 0){
    alert('ê¸ˆì•¡ì„ ì…ë ¥í•´ì¤˜!');
    return;
  }

  const item = {
    type: typeEl.value,      // expense / income
    amount,
    category: categoryEl.value,
    place: placeEl.value.trim(),
    card: cardEl.value,
    memo: memoEl?.value?.trim() || "",
    spentDate: spentDateEl?.value || new Date().toISOString().slice(0,10),
    createdAt: new Date().toISOString()
  };

  const list = JSON.parse(localStorage.getItem('records') || '[]');
  list.unshift(item);
  localStorage.setItem('records', JSON.stringify(list));

  // ì…ë ¥ê°’ ì´ˆê¸°í™”(ê¸ˆì•¡/ì‚¬ìš©ì²˜ë§Œ)
  amountEl.value = '';
  placeEl.value = '';
  memoEl.value = "";
  
  renderRecent(); // âœ… ì €ì¥ í›„ í™ˆ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ 

  modal.classList.add('hidden');
  alert('ì €ì¥ë¨ ğŸ‘');
});

  // ì§€ì¶œ/ìˆ˜ì… ë²„íŠ¼ í† ê¸€
(function(){
  const seg = document.getElementById('typeSegment');
  const hiddenType = document.getElementById('type');
  if(!seg || !hiddenType) return;

  seg.addEventListener('click', (e) => {
    const btn = e.target.closest('.seg-btn');
    if(!btn) return;

    seg.querySelectorAll('.seg-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    hiddenType.value = btn.dataset.value; // expense | income
  });
})();

// ê¸ˆì•¡ ìë™ ì½¤ë§ˆ í‘œì‹œ + ìˆ«ìë§Œ ì €ì¥
(function(){
  const amountInput = document.getElementById('amount');
  if(!amountInput) return;

  const formatComma = (numStr) => {
    if(numStr === '') return '';
    const n = Number(numStr);
    if(Number.isNaN(n)) return '';
    return n.toLocaleString('ko-KR');
  };

  amountEl.addEventListener('input', () => {
  const digits = amountEl.value.replace(/[^0-9]/g, '');
  amountEl.dataset.raw = digits;
  amountEl.value = digits.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
  });
})();


// recordsë¥¼ ì½ì–´ì„œ í™”ë©´ì— ë¿Œë¦¬ê¸°    
function fmtKRW(n){
  return Number(n || 0).toLocaleString("ko-KR") + "ì›";
}

function loadRecords(){
  return JSON.parse(localStorage.getItem("records") || "[]");
}

function renderRecent(){
  const wrap = document.getElementById("recentList");
  if(!wrap) return;

  const list = loadRecords().slice(0, 10); // ìµœê·¼ 10ê°œ
  if(list.length === 0){
    wrap.innerHTML = `<p class="hint">ì•„ì§ ê¸°ë¡ì´ ì—†ì–´. +ë¡œ ì¶”ê°€í•´ë´!</p>`;
    return;
  }

  wrap.innerHTML = list.map(x => {
    const typeLabel = x.type === "income" ? "ìˆ˜ì…" : "ì§€ì¶œ";
    const place = x.place ? ` Â· ${x.place}` : "";
    const isIncome = x.type === "income";
const amountClass = isIncome ? "amount-income" : "amount-expense";

return `
  <div class="recent-item">
    <div class="recent-left">
      <div class="recent-meta">
        ${x.spentDate ? x.spentDate.replace(/-/g, '. ') : ''}
      </div>
      <div>
        ${x.category || "ê¸°íƒ€"} Â· ${x.card || ""}${place}
      </div>
    </div>
    <div class="recent-amt ${amountClass}">
      ${fmtKRW(x.amount)}
    </div>
  </div>
`;
  }).join("");
}

// í˜ì´ì§€ ì²˜ìŒ ì—´ë¦´ ë•Œ 1ë²ˆ ì‹¤í–‰
renderRecent();
    
    

  </script>
</body>
</html>
