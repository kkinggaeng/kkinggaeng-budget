<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0f" />
  <title>ë‚‘ê°± ê°€ê³„ë¶€</title>
  <style>
    :root{
    /* Cloud Dancer base (soft white) */
    --bg: #f7f7f8;
    --panel: #ffffff;
    --panel2: #f1f1f4;
    --shadow: rgba(0,0,0,.10);
    --text: #111111;
    --muted: #666666;
    --line: rgba(0,0,0,.08);
    --expense-red: #C85C5C;   /* ğŸŒ¹ ì§€ì¶œ (Muted Rose Red) */
    --income-green: #20c997;  /* ì´ë¯¸ ì“°ê³  ìˆëŠ” ok ì»¬ëŸ¬ */

    /* accents */
    --accent:#4da3ff;
    --danger:#ff5b5b;
    --ok:#20c997;

    --radius:16px;

    /* NEW: surfaces used by header/tabbar/modal */
    --surface: rgba(255,255,255,.78);
    --surface-strong: rgba(255,255,255,.92);
    --shadow: rgba(0,0,0,.12);
    --overlay: rgba(0,0,0,.35);
    }

    
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      padding-bottom: calc(100px + env(safe-area-inset-bottom));
    }

    /* ìƒë‹¨ í—¤ë” */
  .header{
    position:sticky; top:0;
    background: linear-gradient(to bottom, rgba(255,255,255,.92), rgba(255,255,255,.72));
    backdrop-filter: blur(10px);
    border-bottom:1px solid var(--line);
    padding:18px 16px 12px;
    z-index:5;
  }
    .title{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .title h1{
      margin:0;
      font-size:24px;
      letter-spacing:-.3px;
    }
    .subtitle{
      margin-top:6px;
      color:var(--muted);
      font-size:13px;
    }

    /* ë©”ì¸ ì˜ì—­ */
    .container{
      padding:16px;
      max-width:720px;
      margin:0 auto;
    }

    /* ì¹´ë“œ */
    .card{
      background: var(--panel); 
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 14px;
      margin-bottom: 12px;
      box-shadow: 0 10px 26px var(--shadow);
    }
    .card h2{
      margin:0 0 10px 0;
      font-size:16px;
      letter-spacing:-.2px;
    }
    .hint{
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
      margin:0;
    }

    /* íƒ­ í˜ì´ì§€ */
    .page{ display:none; }
    .page.active{ display:block; }

    /* í•˜ë‹¨ íƒ­ë°” */
    .tabbar{
     position:fixed; left:0; right:0; bottom:0;
     height:66px;
     background: rgba(255,255,255,.82);
     backdrop-filter: blur(14px);
     border-top:1px solid var(--line);
     display:flex;
     padding:8px 10px 10px;
     z-index:10;
    }
    
    .tab{
      flex:1;
      border:none;
      background:transparent;
      color:var(--muted);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:4px;
      border-radius:14px;
      font-size:11px;
      cursor:pointer;
    }
    .tab .icon{font-size:18px; line-height:1}
    .tab.active{
      color:var(--text);
    }
    .tab.active .icon{
      filter: drop-shadow(0 0 10px rgba(77,163,255,.25));
    }

    
    /* âœ… FAB: ì›ë˜ ëª¨ì–‘ ìœ ì§€ + Sage ì»¬ëŸ¬ë§Œ ì ìš© (ìµœì¢…) */
    .fab{
      position:fixed;
      right:18px;
      bottom:86px;
      width:54px;
      height:54px;
      border-radius:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:12;
      cursor:pointer;
      line-height:1;

      /* âœ… ì—¬ê¸°ë¶€í„° Sage í†¤ */
      background: linear-gradient(180deg, #8FBFB0, #7FAE9E);
      color: #F7F8FA; /* Cloud Dancer White */
      text-shadow: 0 1px 0 rgba(46,50,58,.12);
      border: 1px solid rgba(127,174,158,.28); /* ì•„ì£¼ ì–‡ê²Œë§Œ */
      box-shadow:
        0 12px 26px rgba(127,174,158,.35),
        inset 0 1px 0 rgba(255,255,255,.75);
      }

/* + ê¸°í˜¸ê°€ ì‚´ì§ ë‚´ë ¤ê°€ ë³´ì´ë©´ ì´ê±°(ì„ íƒ) */
.fab{ padding-bottom:2px; }



/* ===== FAB ìµœì¢… ê°•ì œ(íŒŒë‘/ìœ ê²©/ì‘ì€ + ì „ë¶€ í•´ê²°) ===== */
.fab{
  /* ëª¨ì–‘/ìœ„ì¹˜ ê³ ì • */
  position:fixed !important;
  right:18px !important;
  bottom:86px !important;
  width:54px !important;
  height:54px !important;
  border-radius:18px !important;

  /* ì •ë ¬ */
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;

  /* + í¬ê¸°/ìœ„ì¹˜ */
  font-size:30px !important;
  line-height:1 !important;
  padding-bottom:2px !important;

  /* âœ… Sage ë°°ê²½ ê°•ì œ */
  background: linear-gradient(180deg, #8FBFB0, #7FAE9E) !important;
  color: #F7F8FA !important;         /* Cloud Dancer White */
  text-shadow: 0 1px 0 rgba(46,50,58,.12) !important;
  
  /* âœ… ìœ ê²©(í…Œë‘ë¦¬) ì œê±° */
  border:none !important;

  /* ê·¸ë¦¼ì */
  box-shadow:
    0 12px 26px rgba(127,174,158,.35),
    inset 0 1px 0 rgba(255,255,255,.75) !important;

  z-index:12 !important;
}
    
    
    /* ì‘ì€ ë°°ì§€ */
    .pill{
      display:inline-flex;
      gap:6px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:var(--panel2);
      color:var(--muted);
      font-size:12px;
    }

    .modal{
      position:fixed; inset:0;
      background: var(--overlay);
      display:flex; align-items:flex-end;
      z-index:20;
    }
    .modal.hidden{display:none}
    .sheet{
      width:100%;
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:20px 20px 0 0;
      padding:16px;
    }
    .sheet h3{margin:0 0 12px}
    .row{display:flex; flex-direction:column; gap:6px; margin-bottom:10px}
    input,select{
      background:var(--panel2);
      border:1px solid var(--line);
      color:var(--text);
      padding:10px;
      border-radius:10px;
    }
    .actions{
      display: flex;
      gap: 12px;        /* ì§€ì¶œ/ìˆ˜ì… gapì´ 10ì´ë©´ 10~12 */
      margin-top: 12px;
    }
    .actions button{
      flex: 1;
      height: 44px;           /* âœ… ì§€ì¶œ/ìˆ˜ì…ê³¼ ë™ì¼ */
      border-radius: 14px;    /* âœ… ì§€ì¶œ/ìˆ˜ì…ê³¼ ë™ì¼ */
      border: none;
      font-size: 14px;
      font-weight: 500;
      letter-spacing: -0.2px;
      cursor: pointer;
      padding: 12px;
      margin-top: 22px;
    }

    /* ì—­í• ë³„ ì°¨ì´ë§Œ */
    #save{ opacity: .9; }
    #close{ opacity: .75; }
    }
   
    .actions .ghost{background:transparent; color:var(--muted)} 

/* Cloud Dancer â€“ Sage ì§€ì¶œ/ìˆ˜ì… í† ê¸€ */
.segmented{
  display:flex;
  gap:12px;
  margin: 8px 0 14px;
}

.seg-btn{
  flex:1;
  height:44px;
  border-radius:14px;
  border:1px solid #D9DDE5;      /* Mist Line Gray */
  background:#EFF1F5;            /* Soft Fog Gray */
  color:#2E323A;                 /* Cloud Ink */
  font-size:14px;
  font-weight:700;
  letter-spacing:-0.2px;
  cursor:pointer;
  -webkit-appearance:none;
  appearance:none;
}

.seg-btn.active{
  background:
    linear-gradient(
      180deg,
      #F7F8FA,
      #EFF1F5
    );                            /* Cloud Dancer White â†’ Soft Fog */
  color:#2E323A;                 /* Cloud Ink */
  border-color:#7FAE9E;          /* ğŸŒ¿ Cloud Sage */
  box-shadow:
    0 6px 14px rgba(127,174,158,.28),
    inset 0 1px 0 rgba(255,255,255,.9);
}

    #memo{
      background: var(--panel2);
      border: 1px solid var(--line);
      border-radius: 14px;

      font-size: 16px;
      min-height: 56px;      /* ë©”ëª¨ 2ì¤„, ì¤„ë°”ê¿ˆ ìì—°, ë¦¬ì‚¬ì´ì¦ˆ ê¸ˆì§€ */
      resize: none;
      line-height: 1.4;
      padding: 10px;
    }
    
    .type-btn {
      font-size: 13px;   /* â† ì—¬ê¸°ì„œ ì¡°ì ˆ (13~15 ì¶”ì²œ) */
      padding: 8px 14px;
    }
    
    /* iOSì—ì„œ input í´ë¦­ ì‹œ ìë™ í™•ëŒ€(zoom) ë°©ì§€ í•µì‹¬ */
    input, select, textarea {
      font-size: 16px !important;
    }

    /* í˜¹ì‹œ ëª¨ë‹¬ ì•ˆì˜ inputë§Œ ë”°ë¡œ ì‘ê²Œ ë¨¹ëŠ” ê²½ìš° ëŒ€ë¹„ */
    .modal input, .modal select, .modal textarea {
     font-size: 16px !important;
    }

    /* ëª¨ë‹¬ textareaë§Œ ì˜ˆì˜ê²Œ */
    textarea{
      width:100%;
      background: var(--panel2);         /* âœ… íšŒìƒ‰ í†µì¼ */
      border: 1px solid var(--line);     /* âœ… ë™ì¼í•œ ë¼ì¸ */
      color: var(--text);
      padding: 10px;                     /* âœ… inputê³¼ ë™ì¼ */
      border-radius: 14px;               /* âœ… ë‘¥ê¸€ê²Œ(ë„ˆê°€ ì›í•œ 14px) */
      font-family: inherit;              /* âœ… í°íŠ¸ í†µì¼(ìê°„ ì´ìŠˆ ë°©ì§€) */
      letter-spacing: -0.2px;            /* âœ… ìê°„ í†µì¼ */
      line-height: 1.4;
      resize: none;                      /* âœ… ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ ì œê±° */
    }


    /* iOS Safari date input text-align fix */
    input[type="date"]{
      text-align: left;
      padding-left: 10px; /* ì™¼ìª½ìœ¼ë¡œ â€˜ë¶™ì–´ ë³´ì´ê²Œâ€™ */
    }

    input[type="date"]::-webkit-date-and-time-value{
      text-align: left;
    }
    .hidden { display: none !important; }


    #recentList{
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
      padding-bottom: 46px; /* ì—¬ìœ  ê³µê°„ í™•ë³´ */
    }
    .recent-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:12px;
      border:1px solid var(--line);
      border-radius:14px;
      background:var(--panel2);
    }
    .recent-left{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .recent-date{
      font-size: 13px;
      color: var(--muted);
    }
    /* ìµœê·¼ë‚´ì—­ - ì¹´í…Œê³ ë¦¬/ì¹´ë“œ/ì‚¬ìš©ì²˜ë¥¼ ë³´ì¡° í…ìŠ¤íŠ¸ë¡œ */
    .recent-title{
      font-size: 14px;
      font-weight: 700;
      letter-spacing: -0.2px;
      color: var(--text);
      display:flex;
      align-items:center;
      gap:8px;
     }

    .recent-sub{
      font-size: 12px;          /* âœ… ì•„ë˜ì¤„ ì‘ê²Œ */
      color: var(--muted);
      letter-spacing: -0.2px;
    }     
    .recent-meta{
      font-size: 12px;        /* ê·¸ëŒ€ë¡œ */
      font-weight: 400;       /* ğŸ”¥ ì´ê²Œ í•µì‹¬ */
      line-height: 1.3;       /* ğŸ”¥ ì¤„ê°„ê²© ì¤„ì´ê¸° */
      letter-spacing: 0;      /* ğŸ”¥ ìê°„ ë¦¬ì…‹ */
      color:var(--muted);
    }
    .recent-amt{
      font-weight: 600;
    }


    .recent-right{
  display:flex;
  align-items:center;
  gap:10px;
}

.edit-btn{
  width:34px;
  height:34px;
  border-radius:12px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.65);
  color: var(--muted);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  display: none;
}

.edit-btn:active{
  transform: scale(.98);
  opacity: .9;
}

.delete-btn{
  width:34px;
  height:34px;
  border-radius:12px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.65);
  color: #C94A4A; /* ì§€ì¶œ ë ˆë“œ ê³„ì—´ */
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  display: none;
}

.delete-btn:active{
  transform: scale(.98);
  opacity: .9;
}
    

/* âœ… í¸ì§‘ëª¨ë“œì¼ ë•Œë§Œ ì—°í•„ ë³´ì´ê¸° */
body.edit-mode .edit-btn,
body.edit-mode .delete-btn{
  display:flex;
}


 /* âœ… í™ˆ - ì˜¤ëŠ˜ì˜ ì§€ì¶œ í•œ ì¤„ */
.today-spend{
  margin-top: 10px;                 /* ëª…ì–¸ê³¼ í•œ ì¤„ ê³µê¸° */
  display: inline-flex;
  justify-content: space-between;
  align-items: center;
  gap: 4px;
}

.today-spend .label{
  letter-spacing: -0.2px;
  font-size: 14px;               /* ë³¸ë¬¸ê³¼ ë™ì¼ */
  color: var(--muted);
  font-weight: 400;
}

.today-spend .value{
  display: inline-flex;                 /* ê³¼í•˜ì§€ ì•Šê²Œ, ë”± ì¸ì§€ìš© */
  letter-spacing: 0px;
  font-size: 14px;               /* ë³¸ë¬¸ê³¼ ë™ì¼ */
  font-weight: 400;              /* â­ êµµê¸° í†µì¼ */
}

    /* ===== ì›” êµ¬ë¶„ì„ (Sticky) ===== */
    .month-header{
      position: sticky;
      top: 85px; /* âœ… ìƒë‹¨ í—¤ë” ì•„ë˜ì— ë¶™ê²Œ(í•„ìš”í•˜ë©´ 68~90 ì‚¬ì´ë¡œ ì¡°ì ˆ) */
      z-index: 6;

      display:flex;
      align-items:center;
      justify-content:space-between;

      padding:10px 12px;
      margin-top:12px;

      border:1px solid var(--line);
      border-radius:14px;

      background: rgba(255,255,255,.88);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }

    .month-title{
      font-weight:800;
      letter-spacing:-0.2px;
    }

    .month-sum{
      font-size:12px;
      color:var(--muted);
      letter-spacing:-0.2px;
    }

    /* ê¸ˆì•¡ ìƒ‰ìƒ */
    .amount-expense {
      color: var(--expense-red);   /* ì§€ì¶œ */
    }
    .amount-income {
      color: var(--income-green);  /* ìˆ˜ì… */
    }

    /* ì§€ì¶œ: ì„¸ì´ì§€ì™€ ì–´ìš¸ë¦¬ëŠ” muted red */
    .amt-expense{
      color: #C94A4A;   /* ë„ˆë¬´ ì¨í•˜ì§€ ì•Šì€, íšŒê¸° ë„ëŠ” ë ˆë“œ */
    }

    /* ìˆ˜ì…: ì„¸ì´ì§€ ê³„ì—´ ê·¸ë¦° */
    .amt-income{
      color: #3E8E7E;   /* ì„¸ì´ì§€ì™€ ê°™ì€ ê³„ì—´ */
    }

    .memo-dot{
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #7FAE9E; /* ì„¸ì´ì§€ */
      display: inline-block;
      margin-left: 6px;
    }

    .month-sep{
      margin: 12px 2px 6px;
      font-size: 12px;
      color: var(--muted);
      letter-spacing: -0.2px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .month-sep::after{
      content: "";
      height: 1px;
      flex: 1;
      background: var(--line);
      opacity: .9;
    }
    
/* âœ… Toast */
.toast{
  position: fixed;
  left: 50%;
  bottom: calc(86px + env(safe-area-inset-bottom)); /* íƒ­ë°” ìœ„ */
  transform: translateX(-50%);
  z-index: 999;

  background: rgba(46,50,58,.92); /* Cloud Ink ëŠë‚Œ */
  color: #F7F8FA;
  padding: 12px 14px;
  border-radius: 14px;
  box-shadow: 0 10px 26px rgba(0,0,0,.18);
  font-size: 14px;
  letter-spacing: -0.2px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  gap: 8px;

  opacity: 0;
  pointer-events: none; /* í† ìŠ¤íŠ¸ ìì²´ëŠ” í´ë¦­ ë¬´ì‹œ */
}

/* ë‚˜íƒ€ë‚  ë•Œ */
.toast.show{
  opacity: 1;
  animation: toastIn .18s ease-out;
}

/* ì‚¬ë¼ì§ˆ ë•Œ */
.toast.hide{
  animation: toastOut .18s ease-in forwards;
}

.toast.hidden{ display:none !important; }

.toast-undo{
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.10);
  color: #F7F8FA;
  padding: 8px 10px;
  border-radius: 12px;
  font-weight: 700;
  cursor: pointer;
  pointer-events: auto; /* âœ… ë²„íŠ¼ë§Œ í´ë¦­ ê°€ëŠ¥ */
}


    

@keyframes toastIn{
  from { transform: translateX(-50%) translateY(8px); opacity: 0; }
  to   { transform: translateX(-50%) translateY(0); opacity: 1; }
}
@keyframes toastOut{
  from { transform: translateX(-50%) translateY(0); opacity: 1; }
  to   { transform: translateX(-50%) translateY(8px); opacity: 0; }
}
    

@supports (background: color-mix(in srgb, white, black)) {
  .fab{
    background: linear-gradient(
      180deg,
      color-mix(in srgb, var(--accent) 78%, white),
      var(--accent)
    );
  }
}
    
  </style>
</head>

<body>
  <header class="header">
    <div class="title">
  <h1>ë‚‘ê°± ê°€ê³„ë¶€</h1>
  <div style="display:flex; gap:8px; align-items:center;">
    <span class="pill">ë¡œì»¬ì €ì¥(ë‚´ í°ì—ë§Œ)</span>
    <button id="toggleEdit" type="button" class="pill" style="cursor:pointer;">í¸ì§‘</button>
  </div>
</div>
    <div class="subtitle">í•˜ë‹¨ íƒ­ìœ¼ë¡œ ì´ë™ Â· í™ˆì—ì„œ +ë¡œ ì…ë ¥(ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ë¶™ì„)</div>
  </header>

  <main class="container">
    <!-- HOME -->
    <section class="page active" id="page-home">
      <div class="card">
        <h2>í™ˆ</h2>
        <p class="hint">
          ì˜¤ëŠ˜ ì“´ ëˆì„ ì•„ëŠ” ê²ƒë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤.<br/>
          ì‘ì‹¬ì‚¼ì¼ì´ë©´, 1ë…„ì— 120ë²ˆì´ë‹¤.
        </p>
        <div class="today-spend" id="todaySpendRow" aria-live="polite">
          <span class="label">ì˜¤ëŠ˜ì˜ ì§€ì¶œ :</span>
          <span class="value amt-expense" id="todaySpendValue">0ì›</span>
        </div>
      </div>

      <div class="card">
        <h2>ìµœê·¼ ë‚´ì—­</h2>
        <div id="recentList"></div>
      </div>
    </section>

    <!-- STATS -->
    <section class="page" id="page-stats">
      <div class="card">
        <h2>í†µê³„</h2>
        <p class="hint">
          ì›í˜• ê·¸ë˜í”„(ì¹´í…Œê³ ë¦¬ ë¹„ìœ¨) + ì „ì›” ëŒ€ë¹„ ë§‰ëŒ€ê·¸ë˜í”„ ìë¦¬.<br/>
          (ì°¨íŠ¸ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ë¶™ì¼ê²Œ)
        </p>
      </div>
    </section>

    <!-- BUDGET -->
    <section class="page" id="page-budget">
      <div class="card">
        <h2>ì˜ˆì‚°</h2>
        <p class="hint">
          ì´ ìƒí™œë¹„ / ì‹ë¹„ / ìƒí•„í’ˆ / ì·¨ë¯¸ ì˜ˆì‚°ì„ ì„¤ì •í•˜ê³ <br/>
          ëª©í‘œ ëŒ€ë¹„ ì‚¬ìš© í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
        </p>
      </div>
      
      <div class="card">
        <h2>ì´ë²ˆ ë‹¬ ì˜ˆì‚°</h2>
        <div class="row">
          <label>ì‹ë¹„</label>
          <input type="text" placeholder="ì˜ˆ: 600,000ì›" disabled />
        </div>

        <div class="row">
          <label>ìƒí™œë¹„</label>
          <input type="text" placeholder="ì˜ˆ: 400,000ì›" disabled />
        </div>

        <div class="row">
          <label>ì·¨ë¯¸ / ì—¬ê°€</label>
          <input type="text" placeholder="ì˜ˆ: 200,000ì›" disabled />
        </div>

        <p class="hint">
        â€» ì˜¤ëŠ˜ì€ UIë§Œ. ì…ë ¥/ê³„ì‚°ì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì—°ê²°í• ê²Œìš”.
        </p>
      </div>
    </section>

    <!-- MONTHLY -->
    <section class="page" id="page-monthly">
      <div class="card">
        <h2>ì›”ë³„</h2>
        <p class="hint">
          ì›” ì„ íƒ â†’ í•´ë‹¹ ì›” ì§€ì¶œ/ìˆ˜ì… ë¦¬ìŠ¤íŠ¸ + í•©ê³„ ìë¦¬.
        </p>
      </div>
    </section>
  </main>

  <!-- Floating + button (Home only) -->
  <button class="fab" id="fab" type="button"><span>+</span></button>
  <div class="modal hidden" id="modal">
  <div class="sheet">
    <h3>ì§€ì¶œ / ìˆ˜ì… ì¶”ê°€</h3>

    <div class="row">
      <label class="label">êµ¬ë¶„</label>

        <div class="segmented" id="typeSegment" role="group" aria-label="ì§€ì¶œ ìˆ˜ì… ì„ íƒ">
          <button type="button" class="seg-btn active" data-value="expense">ì§€ì¶œ</button>
          <button type="button" class="seg-btn" data-value="income">ìˆ˜ì…</button>
        </div>

      <!-- ì‹¤ì œ ì €ì¥ê°’ì„ ë‹´ëŠ” ìˆ¨ê²¨ì§„ input -->
      <input type="hidden" id="type" value="expense" />
    </div>

    <div class="row">
      <label>ë‚ ì§œ</label>
      <input type="date" id="spentDate" />
    </div>

    <div class="row">
  <label>ê¸ˆì•¡</label>
  <input type="text" id="amount" placeholder="ê¸ˆì•¡ ì…ë ¥" inputmode="numeric" autocomplete="off" />
</div>

    <div class="row">
      <label>ì¹´í…Œê³ ë¦¬</label>
      <select id="category"></select>
    </div>

    <div class="row">
      <label>ì‚¬ìš©ì²˜</label>
      <input id="place" placeholder="ì´ë§ˆíŠ¸ / ì¿ íŒ¡ / ì»¬ë¦¬ / ë„¤ì´ë²„ / í¸ì˜ì  / ë§ˆíŠ¸ / ê¸°íƒ€" />
    </div>

    <div class="row">
      <label>ë©”ëª¨(ë¹„ê³ )</label>
      <textarea id="memo" placeholder="ì´ìœ  / ëª©ì  / ëŠë‚Œ ì ì–´ë‘ê¸°"></textarea>
    </div>
    
    <div class="row">
      <label>ì¹´ë“œ</label>
      <select id="card">
        <option>ì‚¼ì„±</option>
        <option>ì‹ í•œ</option>
        <option>êµ­ë¯¼</option>
        <option>í˜„ê¸ˆ/ê³„ì¢Œ</option>
      </select>
    </div>

    <div class="actions">
      <button class="action-btn" id="save">ì €ì¥</button>
      <button class="action-btn" id="close">ë‹«ê¸°</button>
    </div>
  </div>
</div>
  <!-- Bottom tabs -->
  <nav class="tabbar" role="tablist" aria-label="í•˜ë‹¨ íƒ­">
    <button class="tab active" data-target="home" role="tab" aria-selected="true">
      <div class="icon">ğŸ </div>
      <div>í™ˆ</div>
    </button>
    <button class="tab" data-target="stats" role="tab" aria-selected="false">
      <div class="icon">ğŸ“Š</div>
      <div>í†µê³„</div>
    </button>
    <button class="tab" data-target="budget" role="tab" aria-selected="false">
      <div class="icon">ğŸ¯</div>
      <div>ì˜ˆì‚°</div>
    </button>
    <button class="tab" data-target="monthly" role="tab" aria-selected="false">
      <div class="icon">ğŸ—“ï¸</div>
      <div>ì›”ë³„</div>
    </button>
  </nav>

  <!-- âœ… Toast (script ìœ„ë¡œ ì´ë™) -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite">
    <span id="toastText"></span>
    <button id="toastUndo" type="button" class="toast-undo" style="display:none;">
    ë˜ëŒë¦¬ê¸°
    </button>
  </div>


  <script>
    // íƒ­ ì „í™˜
    const tabs = document.querySelectorAll('.tab');
    const pages = {
      home: document.getElementById('page-home'),
      stats: document.getElementById('page-stats'),
      budget: document.getElementById('page-budget'), // âœ… ì¶”ê°€
      monthly: document.getElementById('page-monthly'),
    };
    const fab = document.getElementById('fab');

    function setActiveTab(target){
      // pages
      Object.entries(pages).forEach(([key, el])=>{
        el.classList.toggle('active', key === target);
      });

      // tabs
      tabs.forEach(t=>{
        const isActive = t.dataset.target === target;
        t.classList.toggle('active', isActive);
        t.setAttribute('aria-selected', isActive ? 'true' : 'false');
      });

      // + ë²„íŠ¼ì€ í™ˆì—ì„œë§Œ ë³´ì´ê¸°
      fab.classList.toggle('hidden', target !== 'home');
    }

    tabs.forEach(t=>{
      t.addEventListener('click', ()=> setActiveTab(t.dataset.target));
    });


    
// âœ… í¸ì§‘ëª¨ë“œ í† ê¸€
const toggleEditBtn = document.getElementById("toggleEdit");

toggleEditBtn?.addEventListener("click", () => {
  const on = document.body.classList.toggle("edit-mode");
  toggleEditBtn.textContent = on ? "ì™„ë£Œ" : "í¸ì§‘";

  // âœ… í¸ì§‘ëª¨ë“œ OFFë¡œ ëŒì•„ê°ˆ ë•Œ: ì—´ë ¤ìˆëŠ” ëª¨ë‹¬/ìˆ˜ì •ìƒíƒœ ì •ë¦¬(ì„ íƒì´ì§€ë§Œ ê°•ì¶”)
  if (!on) {
    // ëª¨ë‹¬ ë‹«ê¸°
    modal?.classList.add("hidden");

    // ìˆ˜ì •ì¤‘ ìƒíƒœ ì´ˆê¸°í™” (ë„¤ê°€ ì“°ëŠ” ë³€ìˆ˜ëª…ì— ë§ê²Œ ìœ ì§€)
    editingId = null;
    isEditMode = false;
    editId = null;

    // í¼ë„ ì´ˆê¸°í™”(ì›í•˜ë©´)
    // resetFormToNew?.();
    // resetForm?.();
  }
});
    
    
// ===== ì¹´í…Œê³ ë¦¬(ì´ˆê¸°ê°’: ë‚˜ì¤‘ì— ì–¸ì œë“  ì¶”ê°€ ê°€ëŠ¥) =====
const CATEGORIES = [
  "ì‹ë¹„",
  "ì™¸ì‹/ë°°ë‹¬",
  "ì»¤í”¼/ê°„ì‹",
  "ìƒí•„í’ˆ",
  "ìƒí™œì„œë¹„ìŠ¤",
  "êµ¬ë…/ì •ê¸°ê²°ì œ",
  "ì˜ë¥˜/ì¡í™”",
  "ì•„ì´ìš©í’ˆ",
  "ì•„ì´ì˜ë¥˜",
  "êµìœ¡/ì²´í—˜",
  "ë³´í—˜ë£Œ",
  "ê³µê³¼ê¸ˆ",
  "ê±´ê°•ë³´í—˜ë£Œ",
  "ìƒí’ˆë§¤ì…ë¹„",
  "ì¬ë£ŒÂ·ì œì‘ë¹„",
  "ë°°ì†¡/íƒë°°ë¹„",
  "ìŠ¤í† ì–´ë¹„ìš©",
  "ê¸°íƒ€"
];

const modal = document.getElementById('modal');
const closeBtn = document.getElementById('close');
const saveBtn = document.getElementById('save');
let editId = null;        // ì§€ê¸ˆ ìˆ˜ì • ì¤‘ì¸ record id
let isEditMode = false;   // ìˆ˜ì •ëª¨ë“œì¸ì§€ ì—¬ë¶€

const typeEl = document.getElementById('type');
const amountEl = document.getElementById('amount');
const categoryEl = document.getElementById('category');
const placeEl = document.getElementById('place');
const cardEl = document.getElementById('card');
const spentDateEl = document.getElementById('spentDate');
const memoEl = document.getElementById('memo'); // âœ… ì¶”ê°€!
    
function renderCategories(){
  categoryEl.innerHTML = "";
  CATEGORIES.forEach(name=>{
    const opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    categoryEl.appendChild(opt);
  });
}
renderCategories();

function openModal(){
  modal.classList.remove('hidden');
}

function closeModal(){
  modal.classList.add('hidden');
}

function resetFormToNew(){
  isEditMode = false;
  editId = null;
  saveBtn.textContent = "ì €ì¥"; // ê¸°ë³¸ ë¼ë²¨

  // ê¸°ë³¸ê°’: ì§€ì¶œ
  typeEl.value = "expense";
  const seg = document.getElementById('typeSegment');
  if(seg){
    seg.querySelectorAll('.seg-btn').forEach(b => b.classList.remove('active'));
    const first = seg.querySelector('.seg-btn[data-value="expense"]');
    if(first) first.classList.add('active');
  }

  // ë‚ ì§œ ê¸°ë³¸ê°’ ì˜¤ëŠ˜
  if(spentDateEl) spentDateEl.value = new Date().toISOString().slice(0,10);

  // ì…ë ¥ê°’ ì´ˆê¸°í™”
  amountEl.value = "";
  amountEl.dataset.raw = "";
  categoryEl.value = CATEGORIES[0] || "ê¸°íƒ€";
  placeEl.value = "";
  memoEl.value = "";
  cardEl.value = "ì‚¼ì„±";
}

function fillFormForEdit(item){
  isEditMode = true;
  editId = item.id;
  saveBtn.textContent = "ìˆ˜ì • ì €ì¥";

  // íƒ€ì… ì„¸íŒ… + í† ê¸€ ë²„íŠ¼ UIë„ ë§ì¶”ê¸°
  typeEl.value = item.type || "expense";
  const seg = document.getElementById('typeSegment');
  if(seg){
    seg.querySelectorAll('.seg-btn').forEach(b => b.classList.remove('active'));
    const btn = seg.querySelector(`.seg-btn[data-value="${typeEl.value}"]`);
    if(btn) btn.classList.add('active');
  }

  // ë‚ ì§œ
  spentDateEl.value = (item.spentDate || new Date().toISOString().slice(0,10));

  // ê¸ˆì•¡: raw + ì½¤ë§ˆ í‘œì‹œ
  const raw = String(item.amount || 0);
  amountEl.dataset.raw = raw;
  amountEl.value = raw.replace(/\B(?=(\d{3})+(?!\d))/g, ',');

  // ë‚˜ë¨¸ì§€
  categoryEl.value = item.category || "ê¸°íƒ€";
  placeEl.value = item.place || "";
  memoEl.value = item.memo || "";
  cardEl.value = item.card || "ì‚¼ì„±";
}
    
    
// + ë²„íŠ¼ â†’ ëª¨ë‹¬ ì—´ê¸°
fab.addEventListener('click', ()=>{
  resetFormToNew();
  openModal();
  amountEl.focus();
});
    
// ë‹«ê¸°
closeBtn.addEventListener('click', ()=>{
  editingId = null; // âœ… ìˆ˜ì • ì·¨ì†Œ
  closeModal();
});



    
// ì €ì¥(ì¼ë‹¨ ë¡œì»¬ ì €ì¥ë§Œ)
// âœ… ì „ì—­ ìƒíƒœ: ìˆ˜ì • ì¤‘ì¸ record id (ì—†ìœ¼ë©´ ì‹ ê·œ ì¶”ê°€)
let editingId = null;

function closeModal(){
  modal.classList.add('hidden');
}

function resetForm(){
  // êµ¬ë¶„ ê¸°ë³¸ê°’: ì§€ì¶œ
  typeEl.value = "expense";
  const seg = document.getElementById('typeSegment');
  if(seg){
    seg.querySelectorAll('.seg-btn').forEach(b => b.classList.remove('active'));
    seg.querySelector(`.seg-btn[data-value="expense"]`)?.classList.add('active');
  }

  // ë‚ ì§œ ê¸°ë³¸ê°’: ì˜¤ëŠ˜
  spentDateEl.value = new Date().toISOString().slice(0,10);

  // ì…ë ¥ê°’ ì´ˆê¸°í™”
  amountEl.value = "";
  amountEl.dataset.raw = "";
  placeEl.value = "";
  memoEl.value = "";
}



    
    
    
// âœ… ì €ì¥(ì¶”ê°€/ìˆ˜ì • ê²¸ìš©) â€” ìµœì¢…ë³¸
saveBtn.addEventListener('click', ()=>{
  const amount = Number(amountEl.dataset.raw || 0);
  if(!amount || amount <= 0){
    alert('ê¸ˆì•¡ì„ ì…ë ¥í•´ì¤˜!');
    return;
  }

  const list = loadRecords(); // âœ… ë„ˆê°€ ì´ë¯¸ ë§Œë“  í•¨ìˆ˜ ì‚¬ìš©

  // âœ… ê³µí†µ payload (id/createdAt ì œì™¸)
  const payload = {
    type: typeEl.value,
    amount,
    category: categoryEl.value,
    place: placeEl.value.trim(),
    card: cardEl.value,
    memo: (memoEl.value || "").trim(),
    spentDate: spentDateEl.value || new Date().toISOString().slice(0,10),
  };

  if(editingId){
    // âœ… ìˆ˜ì • ëª¨ë“œ
    const idx = list.findIndex(x => x.id === editingId);
    if(idx < 0){
      alert("ìˆ˜ì •í•  í•­ëª©ì„ ì°¾ì§€ ëª»í–ˆì–´ ğŸ˜µ");
      return;
    }

    list[idx] = {
      ...list[idx],     // id, createdAt ìœ ì§€
      ...payload,
      updatedAt: new Date().toISOString()
    };

    editingId = null; // âœ… ìˆ˜ì • ëë‚¬ìœ¼ë‹ˆ ì´ˆê¸°í™”
    localStorage.setItem('records', JSON.stringify(list));
    renderRecent();
    closeModal();
    showToast("ìˆ˜ì •ë¨ âœ“");
    return;
  }

  // âœ… ì‹ ê·œ ì¶”ê°€
  const item = {
    id: (crypto?.randomUUID?.() || ("id_" + Date.now() + "_" + Math.random().toString(16).slice(2))),
    ...payload,
    createdAt: new Date().toISOString()
  };

  list.unshift(item);
  localStorage.setItem('records', JSON.stringify(list));
  renderRecent();
  resetForm();
  closeModal();
  showToast("ì €ì¥ë¨ âœ“");
});



function fillFormForEdit(item){
  editingId = item.id;

  // êµ¬ë¶„
  typeEl.value = item.type || "expense";
  const seg = document.getElementById('typeSegment');
  if(seg){
    seg.querySelectorAll('.seg-btn').forEach(b => b.classList.remove('active'));
    seg.querySelector(`.seg-btn[data-value="${typeEl.value}"]`)?.classList.add('active');
  }

  // ë‚ ì§œ
  spentDateEl.value = item.spentDate || new Date().toISOString().slice(0,10);

  // ê¸ˆì•¡(raw + í‘œì‹œê°’)
  const raw = String(item.amount || "0").replace(/[^0-9]/g, "");
  amountEl.dataset.raw = raw;
  amountEl.value = raw.replace(/\B(?=(\d{3})+(?!\d))/g, ",");

  // ë‚˜ë¨¸ì§€
  categoryEl.value = item.category || "ê¸°íƒ€";
  placeEl.value = item.place || "";
  cardEl.value = item.card || "í˜„ê¸ˆ/ê³„ì¢Œ";
  memoEl.value = item.memo || "";
}


    

  // ì§€ì¶œ/ìˆ˜ì… ë²„íŠ¼ í† ê¸€
(function(){
  const seg = document.getElementById('typeSegment');
  const hiddenType = document.getElementById('type');
  if(!seg || !hiddenType) return;

  seg.addEventListener('click', (e) => {
    const btn = e.target.closest('.seg-btn');
    if(!btn) return;

    seg.querySelectorAll('.seg-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    hiddenType.value = btn.dataset.value; // expense | income
  });
})();

// ê¸ˆì•¡ ìë™ ì½¤ë§ˆ í‘œì‹œ + ìˆ«ìë§Œ ì €ì¥
(function(){
  const amountInput = document.getElementById('amount');
  if(!amountInput) return;

  const formatComma = (numStr) => {
    if(numStr === '') return '';
    const n = Number(numStr);
    if(Number.isNaN(n)) return '';
    return n.toLocaleString('ko-KR');
  };

  amountEl.addEventListener('input', () => {
  const digits = amountEl.value.replace(/[^0-9]/g, '');
  amountEl.dataset.raw = digits;
  amountEl.value = digits.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
  });
})();


// recordsë¥¼ ì½ì–´ì„œ í™”ë©´ì— ë¿Œë¦¬ê¸°    
function fmtKRW(n){
  return Number(n || 0).toLocaleString("ko-KR") + "ì›";
}

function loadRecords(){
  return JSON.parse(localStorage.getItem("records") || "[]");
}

function renderRecent(){
  const wrap = document.getElementById("recentList");
  if(!wrap) return;

  const all = loadRecords().slice();

  // âœ… (ì„ íƒ) ì˜ˆì „ ë°ì´í„°ì— id ì—†ìœ¼ë©´ ë³´ê°•
  let changed = false;
  all.forEach(x=>{
    if(!x.id){
      x.id = (crypto?.randomUUID?.() || ("id_" + Date.now() + "_" + Math.random().toString(16).slice(2)));
      changed = true;
    }
  });
  if(changed){
    localStorage.setItem("records", JSON.stringify(all));
  }

  // âœ… ì›”ë³„ í•©ê³„
  const monthAgg = {};
  all.forEach(x=>{
    const ym = (x.spentDate || "").slice(0,7);
    if(!ym || !ym.includes("-")) return;
    if(!monthAgg[ym]) monthAgg[ym] = { expense: 0, income: 0 };
    const amt = Number(x.amount || 0);
    if(x.type === "income") monthAgg[ym].income += amt;
    else monthAgg[ym].expense += amt;
  });




  function renderTodaySpend(){
  const el = document.getElementById("todaySpendValue");
  if(!el) return;

  const today = new Date().toISOString().slice(0,10); // YYYY-MM-DD
  const list = loadRecords();

  const sum = list.reduce((acc, x) => {
    const isToday = (x.spentDate || "").slice(0,10) === today;
    const isExpense = (x.type || "expense") !== "income";
    if(isToday && isExpense){
      acc += Number(x.amount || 0);
    }
    return acc;
  }, 0);

  el.textContent = fmtKRW(sum);
}


  



  // âœ… ì •ë ¬
  const list = all
    .sort((a, b) => {
      const ad = (a.spentDate || "0000-00-00");
      const bd = (b.spentDate || "0000-00-00");
      if (bd !== ad) return bd.localeCompare(ad);
      return (b.createdAt || "").localeCompare(a.createdAt || "");
    })
    .slice(0, 30);

  if(list.length === 0){
    wrap.innerHTML = `<p class="hint">ì•„ì§ ê¸°ë¡ì´ ì—†ì–´. +ë¡œ ì¶”ê°€í•´ë´!</p>`;
    return;
  }

  const monthLabel = (iso) => {
    const s = (iso || "").slice(0,7);
    if(!s.includes("-")) return "ë‚ ì§œ ì—†ìŒ";
    const [y,m] = s.split("-");
    return `${y}ë…„ ${m}ì›”`;
  };

  const monthSumText = (ym) => {
    const agg = monthAgg[ym] || { expense: 0, income: 0 };
    const exp = Number(agg.expense || 0).toLocaleString("ko-KR");
    const inc = Number(agg.income || 0).toLocaleString("ko-KR");
    return `ì§€ì¶œ ${exp} Â· ìˆ˜ì… ${inc}`;
  };

  let html = "";
  let prevMonth = "";

  list.forEach(x => {
  const ym = (x.spentDate || "").slice(0,7);

  // ì›” í—¤ë”
  if(ym !== prevMonth){
    html += `
      <div class="month-header">
        <div class="month-title">${monthLabel(x.spentDate)}</div>
        <div class="month-sum">${monthSumText(ym)}</div>
      </div>
    `;
    prevMonth = ym;
  }

  // ë‚ ì§œ
  const d = (x.spentDate || "").replaceAll("-", ". ");
  const dateText = d ? (d + ".") : "";

  // ì˜¤ëŠ˜ í‘œì‹œ
  const isToday =
    (x.createdAt || "").slice(0,10) === new Date().toISOString().slice(0,10);
  const todayDot = isToday ? `<span class="memo-dot"></span>` : "";

  // ì•„ë˜ì¤„
  const sub = [x.card, x.place].filter(Boolean).join(" Â· ");
  const amtSideClass = x.type === "income" ? "amt-income" : "amt-expense";

  html += `
    <div class="recent-item" data-id="${x.id}">
      <div class="recent-left">
        <div class="recent-meta">${dateText}</div>
        <div class="recent-title">
          ${x.category || "ê¸°íƒ€"}${todayDot}
        </div>
        <div class="recent-sub">${sub}</div>
      </div>

      <div class="recent-right">
        <div class="recent-amt ${amtSideClass}">
          ${fmtKRW(x.amount)}
        </div>
        <button class="edit-btn" type="button" data-id="${x.id}" aria-label="ìˆ˜ì •">âœï¸</button>
        <button class="delete-btn" type="button" data-id="${x.id}" aria-label="ì‚­ì œ">ğŸ—‘ï¸</button>
      </div>
    </div>
  `;
});


  wrap.innerHTML = html;
  renderTodaySpend();
}


    
// í˜ì´ì§€ ì²˜ìŒ ì—´ë¦´ ë•Œ 1ë²ˆ ì‹¤í–‰
renderRecent();

/* =========================
   âœï¸ ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
   ========================= */
document.getElementById("recentList")?.addEventListener("click", (e) => {
  const btn = e.target.closest(".edit-btn");
  if(!btn) return;

  e.stopPropagation(); // âœ… í˜¹ì‹œ ë‹¤ë¥¸ í´ë¦­ ì´ë²¤íŠ¸ê°€ ìƒê²¨ë„ ì—°í•„ë§Œ ë…ë¦½ ë°˜ì‘

  const id = btn.dataset.id;
  if(!id) return;

  const all = loadRecords();
  const item = all.find(r => r.id === id);
  if(!item) return;

  fillFormForEdit(item);
  openModal();
});


    



  /* =========================
   âœ… Toast (ë‹¨ì¼)
   ========================= */
const toastEl = document.getElementById("toast");
const toastTextEl = document.getElementById("toastText");
const toastUndoBtn = document.getElementById("toastUndo");

let toastTimer = null;
let pendingDelete = null; // { item, index, timerId }
const UNDO_DURATION = 5000;

function showToast(text, { undo=false, duration=1400 } = {}){
  if(!toastEl || !toastTextEl) return;

  // íƒ€ì´ë¨¸ ì •ë¦¬
  if(toastTimer) clearTimeout(toastTimer);
  if(pendingDelete?.timerId && !undo){
    clearTimeout(pendingDelete.timerId);
    pendingDelete = null;
  }

  toastTextEl.textContent = text;

  if(toastUndoBtn){
    toastUndoBtn.style.display = undo ? "inline-flex" : "none";
  }

  toastEl.classList.remove("hidden", "hide");
  toastEl.classList.add("show");

  // undo í† ìŠ¤íŠ¸ëŠ” 5ì´ˆ í›„ ìë™ ë‹«ê¸° (undo ê°€ëŠ¥ ì‹œê°„)
  const ms = undo ? UNDO_DURATION : duration;

  toastTimer = setTimeout(() => {
    toastEl.classList.remove("show");
    toastEl.classList.add("hide");

    setTimeout(() => {
      toastEl.classList.add("hidden");
      toastEl.classList.remove("hide");
    }, 220);
  }, ms);
}

function hideToast(){
  if(!toastEl) return;
  toastEl.classList.add("hidden");
  toastEl.classList.remove("show", "hide");
}

/* =========================
   ğŸ—‘ï¸ ì‚­ì œ + Undo (5ì´ˆ)
   ========================= */
document.getElementById("recentList")?.addEventListener("click", (e) => {
  const del = e.target.closest(".delete-btn"); // âœ… í´ë˜ìŠ¤ ë§ì¶¤
  if(!del) return;

  e.stopPropagation();

  const id = del.dataset.id;
  if(!id) return;

  const list = loadRecords();
  const idx = list.findIndex(r => r.id === id);
  if(idx < 0) return;

  // ê¸°ì¡´ pendingDelete ìˆìœ¼ë©´ íƒ€ì´ë¨¸ ì •ë¦¬
  if(pendingDelete?.timerId){
    clearTimeout(pendingDelete.timerId);
    pendingDelete = null;
  }

  const removed = list[idx];

  // 1) ì¦‰ì‹œ ì œê±°
  list.splice(idx, 1);
  localStorage.setItem("records", JSON.stringify(list));
  renderRecent();

  // 2) pending ì €ì¥
  pendingDelete = { item: removed, index: idx, timerId: null };

  // 3) í† ìŠ¤íŠ¸ ë„ìš°ê¸°(undo ë²„íŠ¼ í¬í•¨, 5ì´ˆ ìœ ì§€)
  showToast("ì‚­ì œë¨", { undo: true });

  pendingDelete.timerId = setTimeout(() => {
    pendingDelete = null;
    // ì‹œê°„ ì§€ë‚˜ë©´ ê·¸ëƒ¥ ë‹«í˜(ì´ë¯¸ ì €ì¥ì†Œì—ì„œ ì‚­ì œë¨)
  }, UNDO_DURATION);
});

// âœ… Undo í´ë¦­ â†’ ë³µêµ¬
toastUndoBtn?.addEventListener("click", () => {
  if(!pendingDelete) return;

  clearTimeout(pendingDelete.timerId);

  const { item, index } = pendingDelete;
  const list = loadRecords();

  const safeIndex = (index >= 0 && index <= list.length) ? index : 0;
  list.splice(safeIndex, 0, item);

  localStorage.setItem("records", JSON.stringify(list));
  renderRecent();

  pendingDelete = null;

  showToast("ë³µêµ¬ë¨ âœ“", { undo: false, duration: 1200 });
});
    
  </script>

  
</body>
</html>
